<html>
	<head>
		<title>getting started - installing and updating</title>
		<link href="hydrus.ico" rel="shortcut icon" />
		<link href="style.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div class="content">
			<p><a href="introduction.html"><---- Back to the introduction</a></p>
			<p>If any of this is confusing, a simpler guide is <a href="https://github.com/Zweibach/text/blob/master/Hydrus/Hydrus%20Help%20Docs/00_tableOfContents.md">here</a>, and some video guides are <a href="https://github.com/CuddleBear92/Hydrus-guides">here</a>!</p>
			<h3 id="downloading"><a href="#downloading">downloading</a></h3>
			<p>You can get the latest release at <a href="https://github.com/hydrusnetwork/hydrus/releases">my github releases page</a>.</p>
			<p>I try to release a new version every Wednesday by 8pm EST and write an accompanying post on <a href="http://hydrus.tumblr.com/">my tumblr</a> and a Hydrus Network General thread on <a href="https://8chan.moe/t/catalog.html">8chan.moe /t/</a>.</p>
			<h3 id="installing"><a href="#installing">installing</a></h3>
			<p class="warning">The hydrus releases are 64-bit only. If you are a python expert, there is the slimmest chance you'll be able to get it running from source on a 32-bit machine, but it would be easier just to find a newer computer to run it on.</p>
			<p>for Windows:</p>
			<ul>
				<li>If you want the easy solution, download the .exe installer. Run it, hit ok several times.</li>
				<li>If you know what you are doing and want a little more control, get the .zip. Don't extract it to Program Files unless you are willing to run it as administrator every time (it stores all its user data inside its own folder). You probably want something like D:\hydrus.</li>
				<li><i>Note if you run &lt;Win10, you may need <a href="https://www.microsoft.com/en-us/download/details.aspx?id=48145">Visual C++ Redistributable for Visual Studio 2015</a>, if you don't already have it for vidya. If you run Win7, you will need some/all core OS updates released before 2017.</i></li>
				<li>If you use Windows 10 N (a version of Windows without some media playback features), you will likely need the 'Media Feature Pack'. There have been several versions of this, so it may best found by searching for the latest version or hitting Windows Update, but otherwise check <a href="https://support.microsoft.com/en-us/help/3145500/media-feature-pack-list-for-windows-n-editions">here</a>.</li>
			</ul>
			<p>for macOS:</p>
			<ul>
				<li>Get the .dmg App. Open it, drag it to Applications, and check the readme inside.</li>
			</ul>
			<p>for Linux:</p>
			<ul>
				<li>Get the .tag.gz. Extract it somewhere useful and create shortcuts to 'client' and 'server' as you like. The build is made on Ubuntu, so if you run something else, compatibility is hit and miss.</li>
				<li>If you use Arch Linux, you can check out the AUR package a user maintains <a href="https://aur.archlinux.org/packages/hydrus/">here</a>.</li>
				<li>If you have problems running the Ubuntu build, users with some python experience generally find running from source works well.</li>
				<li>You might need to get 'libmpv1' to get mpv working and playing video/audio. This is the mpv library, not the player. Check help->about to see if it is available--if not, see if you can get it with <i>apt</i>.</li>
				<li>You can also try <a href="wine.html">running the Windows version in wine</a>.</li>
			</ul>
			<p>from source:</p>
			<ul>
				<li>If you have some python experience, you can <a href="running_from_source.html">run from source</a>.</li>
			</ul>
			<p>By default, hydrus stores all its data&#x2014;options, files, subscriptions, <i>everything</i>&#x2014;entirely inside its own directory. You can extract it to a usb stick, move it from one place to another, have multiple installs for multiple purposes, wrap it all up inside a truecrypt volume, whatever you like. The .exe installer writes some unavoidable uninstall registry stuff to Windows, but the 'installed' client itself will run fine if you manually move it.</p>
			<p><span class="warning">However, for macOS users:</span> the Hydrus App is <b>non-portable</b> and puts your database in ~/Library/Hydrus (i.e. /Users/[You]/Library/Hydrus). You can update simply by replacing the old App with the new, but if you wish to backup, you should be looking at ~/Library/Hydrus, not the App itself.</p>
			<h3 id="anti_virus"><a href="#anti_virus">anti-virus</a></h3>
                        <p>Hydrus is made by an Anon out of duct tape and string. It combines file parsing tech with lots of network and database code in unusual and powerful ways, and all through a hacked-together executable that isn't signed by any big official company.</p>
                        <p>Unfortunately, we have been hit by anti-virus false positives throughout development. Every few months, one or more of the larger anti-virus programs sees some code that looks like something bad, or they run the program in a testbed and don't like something it does, and then they quarantine it. Every single instance of this so far has been a false positive. They usually go away the next week or two when the next set of definitions roll out. Some hydrus users are kind enough to report the program as a false positive to the anti-virus companies themselves, which also helps here.</p>
                        <p>Some users have never had the problem, some get hit regularly. The situation is obviously worse on Windows. If you try to extract the zip and client.exe or the whole folder suddenly disappears, please check your anti-virus software.</p>
                        <p>I am interested in reports about these false-positives, just so I know what is going on. Sometimes I have been able to reduce problems by changing something in the build (one of these was, no shit, an anti-virus testbed running the installer and then opening the help html at the end, which launched Edge browser, which then triggered Windows Update, which hit UAC and was considered suspicious. I took out the 'open help' checkbox from the installer as a result).</p>
                        <p>You should be careful about random software online. For my part, the program is completely open source, and I have a long track record of designing it with privacy foremost. There is no intentional spyware of any sort--the program never connects to another computer unless you tell it to. Furthermore, the exe you download is now built on github's cloud, so there are very few worries about a trojan-infected build environment putting something I did not intend into the program (as there once were when I built the release on my home machine). That doesn't stop Windows Defender from sometimes calling it an ugly name like "Tedy.4675" and definitively declaring "This program is dangerous and executes commands from an attacker" but that's the modern anti-virus ecosystem.</p>
                        <p>There aren't excellent solutions to this problem. I don't like to say 'just exclude the program directory from your anti-virus settings', but some users are comfortable with this and say it works fine. One thing I do know that helps (with other things too), if you are using the default Windows Defender, is going into the Windows Security shield icon on your taskbar, and 'virus and threat protection' and then 'virus and threat protection settings', and turning off 'Cloud-delivered protection' and 'Automatic sample submission'. It seems with these on, Windows will talk with a central server about executables you run and download early updates, and this gives a lot of false positives.</p>
                        <p>If you are still concerned, please feel free to run from source, as above. You are controlling everything, then, and can change anything about the program you like. Or you can only run releases from four weeks ago, since you know the community would notice by then if there ever were a true positive. Or just run it in a sandbox and watch its network traffic.</p>
                        <p>In 2022 I am going to explore a different build process to see if that reduces the false positives. We currently make the executable with PyInstaller, which has some odd environment set-up the anti-virus testbeds don't seem to like, and perhaps PyOxidizer will be better. We'll see.</p>
			<h3 id="running"><a href="#running">running</a></h3>
                        <p>To run the client:</p>
                        <p>for Windows:</p>
			<ul>
				<li>For the installer, run the Start menu shortcut it added.</li>
				<li>For the extract, run 'client.exe' in the base directory, or make a shortcut to it.</li>
			</ul>
			<p>for macOS:</p>
			<ul>
				<li>Run the App you installed.</li>
			</ul>
			<p>for Linux:</p>
			<ul>
				<li>Run the 'client' executable in the base directory. You may be able to double-click it, otherwise you are talking './client' from the terminal.</li>
                                <li>If you experience virtual memory crashes, please review <a href="Fixing_Hydrus_Random_Crashes_Under_Linux.md">this thorough guide</a> by a user.</li>
			</ul>
			<h3 id="updating"><a href="#updating">updating</a></h3>
			<p class="warning">Hydrus is imageboard-tier software, wild and fun but unprofessional. It is written by one Anon spinning a lot of plates. Mistakes happen from time to time, usually in the update process. There are also no training wheels to stop you from accidentally overwriting your whole db if you screw around. Be careful when updating. Make backups beforehand!</p>
			<p><b>Hydrus does not auto-update. It will stay the same version unless you download and install a new one.</b></p>
			<p>Although I put out an new version every week, you can update far less often if you want. The client keeps to itself, so if it does exactly what you want and a new version does nothing you care about, you can just leave it. Other users enjoy updating every week, simply because it makes for a nice schedule. Others like to stay a week or two behind what is current, just in case I mess up and cause a temporary bug in something they like.</p>
			<p>A user has written a longer and more formal guide to updating, and information on the 334-&gt;335 step <a href="update_guide.rtf">here</a>.</p>
			<p>The update process:<p>
			<ul>
				<li>If the client is running, close it!</li>
				<li>If you maintain a backup, run it now!</li>
				<li>If you use the installer, just download the new installer and run it. It should detect where the last install was and overwrite everything automatically.</li>
				<li>If you extract, then just extract the new version right on top of your current install and overwrite manually.</li>
				<li>Start your client or server. It may take a few minutes to update its database. I will say in the release post if it is likely to take longer.</li>
			</ul>
			<p>Unless the update specifically disables or reconfigures something, all your files and tags and settings will be remembered after the update.</p>
			<p>Releases typically need to update your database to their version. New releases can retroactively perform older database updates, so if the new version is v255 but your database is on v250, you generally only need to get the v255 release, and it'll do all the intervening v250->v251, v251->v252, etc... update steps in order as soon as you boot it. If you need to update from a release more than, say, ten versions older than current, see below. You might also like to skim the release posts or <a href="changelog.html">changelog</a> to see what is new.</p>
			<p>Clients and servers of different versions can usually connect to one another, but from time to time, I make a change to the network protocol, and you will get polite error messages if you try to connect to a newer server with an older client or <i>vice versa</i>. There is still no <i>need</i> to update the client--it'll still do local stuff like searching for files completely fine. Read my release posts and judge for yourself what you want to do.</p>
			<h3 id="clean_installs"><a href="#clean_installs">clean installs</a></h3>
			<b>This is only relevant if you update and cannot boot at all.</b>
			<p>Very rarely, hydrus needs a clean install. This can be due to a special update like when we moved from 32-bit to 64-bit or needing to otherwise 'reset' a custom install situation. The problem is usually that a library file has been renamed in a new version and hydrus has trouble figuring out whether to use the older one (from a previous version) or the newer.</p>
			<p>In any case, if you cannot boot hydrus and it either fails silently or you get a crash log or system-level error popup complaining in a technical way about not being able to load a dll/pyd/so file, you may need a clean install, which essentially means clearing any old files out and reinstalling.</p>
			<p>However, you need to be careful not to delete your database! It sounds silly, but at least one user has made a mistake here. The process is simple, do not deviate:</p>
			<ul>
				<li>Make a backup if you can!</li>
				<li>Go to your install directory.</li>
				<li>Delete all the files and folders except the 'db' dir (and all of its contents, obviously).</li>
				<li>Reinstall/extract hydrus as you normally do.</li>
			</ul>
			<p>After that, you'll have a 'clean' version of hydrus that only has the latest version's dlls. If hydrus still will not boot, I recommend you roll back to your last working backup and let me, hydrus dev, know what your error is.</p>
			<h3 id="big_updates"><a href="#big_updates">big updates</a></h3>
			<p>If you have not updated in some time--say twenty versions or more--doing it all in one jump, like v250->v290, is likely not going to work. I am doing a lot of unusual stuff with hydrus, change my code at a fast pace, and do not have a ton of testing in place. Hydrus update code often falls to <a href="https://en.wikipedia.org/wiki/Software_rot">bitrot</a>, and so some underlying truth I assumed for the v255->v256 code may not still apply six months later. If you try to update more than 50 versions at once (i.e. trying to perform more than a year of updates in one go), the client will give you a polite error rather than even try.</p>
			<p>As a result, if you get a failure on trying to do a big update, try cutting the distance in half--try v270 first, and then if that works, try v270->v290. If it doesn't, try v260, and so on.</p>
			<p>If you narrow the gap down to just one version and still get an error, please let me know. I am very interested in these sorts of problems and will be happy to help figure out a fix with you (and everyone else who might be affected).</p>
			<h3 id="backing_up" class="warning"><a href="#backing_up">backing up</a></h3>
                        <h3 class="warning">I am not joking around: if you end up liking hydrus, you should back up your database</h3>
			<p><span class="warning">Maintaining a regular backup is important for hydrus.</span> The program stores a lot of complicated data that you will put hours and hours of work into, and if you only have one copy and your hard drive breaks, you could lose everything. This has happened before--to people who thought it would never happen to them--and it sucks big time to go through. <b>Don't let it be you.</b></p>
                        <p>Hydrus's database engine, SQLite, is excellent at keeping data safe, but it cannot work in a faulty environment. Ways in which users of hydrus have damaged/lost their database:</p>
                        <ul>
                            <li>Hard drive hardware failure (age, bad ventilation, bad cables, etc...)</li>
                            <li>Lightning strike on non-protected socket or rough power cut on non-UPS'd power supply</li>
                            <li>RAM failure</li>
                            <li>Motherboard/PSU power problems</li>
                            <li>Accidental deletion</li>
                            <li>Accidental overwrite (usually during a borked update)</li>
                            <li>Encrypted partition auto-dismount/other borked settings</li>
                            <li>Cloud backup interfering with ongoing writes</li>
                            <li>Network drive location not guaranteeing accurate file locks</li>
                        </ul>
                        <p>Some of those you can mitigate (don't run the database over a network!) and some will always be a problem, but if you have a backup, none of them can kill you.</p>
			<p>If you do not already have a backup routine for your files, this is a great time to start. I now run a backup every week of all my data so that if my computer blows up or anything else awful happens, I'll at worst have lost a few days' work. Before I did this, I once lost an entire drive with tens of thousands of files, and it felt awful. If you are new to saving a lot of media, I hope you can avoid what I felt. ;_;</p>
			<p>I use <a href="http://abstractspoon.com/">ToDoList</a> to remind me of my jobs for the day, including backup tasks, and <a href="http://sourceforge.net/projects/freefilesync/">FreeFileSync</a> to actually mirror over to an external usb drive. I recommend both highly (and for ToDoList, I recommend hiding the complicated columns, stripping it down to a simple interface). It isn't a huge expense to get a couple-TB usb drive either--it is <b>absolutely</b> worth it for the peace of mind.</p>
			<p>By default, hydrus stores all your user data in one location, so backing up is simple:</p>
			<ul>
				<li>
					<h4>the simple way - inside the client</h4>
					<p>Go <i>database->set up a database backup location</i> in the client. This will tell the client where you want your backup to be stored. A fresh, empty directory on a different drive is ideal.</p>
					<p>Once you have your location set up, you can thereafter hit <i>database->update database backup</i>. It will lock everything and mirror your files, showing its progress in a popup message. The first time you make this backup, it may take a little while (as it will have to fully copy your database and all its files), but after that, it will only have to copy new or altered files and should only ever take a couple of minutes.</p>
					<p>Advanced users who have migrated their database across multiple locations will not have this option--use an external program in this case.</p>
				</li>
				<li>
					<h4>the powerful (and best) way - using an external program</h4>
					<p>If you would like to integrate hydrus into a broader backup scheme you already run, or you are an advanced user with a complicated hydrus install that you have migrated across multiple drives, then you need to backup two things: the client*.db files and your client_files directory(ies). By default, they are all stored in install_dir/db. The .db files contain your settings and file metadata like inbox/archive and tags, while the client_files subdirs store your actual media and its thumbnails. If everything is still under install_dir/db, then it is usually easiest to just backup the whole install dir, keeping a functional 'portable' copy of your install that you can restore no prob. Make sure you keep the .db files together--they are not interchangeable and mostly useless on their own!</p>
					<p>Shut the client down while you run the backup, obviously.</p>
				</li>
			</ul>
			<p class="warning">Do not put your live database in a folder that continuously syncs to a cloud backup. Many of these services will interfere with a running client and can cause database corruption. If you still want to use a system like this, either turn the sync off while the client is running, or use the above backup workflows to safely backup your client to a separate folder that syncs to the cloud.</p>
			<p>I recommend you always backup before you update, just in case there is a problem with my code that breaks your database. If that happens, please <a href="contact.html">contact me</a>, describing the problem, and revert to the functioning older version. I'll get on any problems like that immediately.</p>
                        <h3 id="backing_up_small"><a href="#backing_up_small">backing up with not much space</a></h3>
                        <p>If you decide not to maintain a backup because you cannot afford drive space for all your files, please please at least back up your actual database files. Use FreeFileSync or a similar program to back up the four 'client*.db' files in install_dir/db when the client is not running. Just make sure you have a copy of those files, and then if your main install becomes damaged, we will have a reference to either roll back to or manually restore data from. Even if you lose a bunch of media files in this case, with an intact database we'll be able to schedule recovery of anything with a URL.<p>
                        <p>It is best to have all four database files. It is generally easy and quick to fix problems if you have a backup of all four. If client.caches.db is missing, you can recover but it might take ten or more hours of CPU work to regenerate. If client.mappings.db is missing, you might be able to recover tags for your local files from a mirror in an intact client.caches.db. However, client.master.db and client.db are the most important. If you lose either of those, or they become too damaged to read and you have no backup, then your database is essentially dead and likely every single archive and view and tag and note and url record you made is lost. This has happened before, do not let it be you.</p>
			<p class="right"><a href="getting_started_files.html">Let's import some files! ----></a></p>
		</div>
	</body>
</html>
